# Test 5: pull down compensation pin with external PWM signal

In this test error amplifier is configured as comparator to generate 50% PWM on both outputs A and B.
Compensation pint is pulled down by npn transistor which is driven by external PWM signal. This external
PWM is generated by Arduino Nano and has the following parameters:
 * duty cycle 50%
 * frequency about 8 times smaller than the frequency of output on channel A or B. Meassured in Test 1 frequency of channel A
 is around 47.6 kHz, which gives the 5,95 kHz of the external PWM.
 
Test circuit is as below:

<img src="https://raw.githubusercontent.com/wmarkow/sandbox/master/inverter-welder/elements/sg3525/tests/Test5/05_external_pwm_circuit.png" width="50%" > 
<img src="https://raw.githubusercontent.com/wmarkow/sandbox/master/inverter-welder/elements/sg3525/tests/Test5/05_external_pwm_circuit.jpg" width="60%" >

The result of generated by SG3525 signals is below:
 * signal on top comes from pin 9 of SG3525, which is pulled down by transistor
 * signal on the bottom comes from pin 11 of SG3525
 * time per div is 50us
 * voltage per div is 5V

<img src="https://raw.githubusercontent.com/wmarkow/sandbox/master/inverter-welder/elements/sg3525/tests/Test5/05_pin9_pin11.jpg" width="60%" >

 
Why is the frequency of external 8 time smaller? Just to have some initial value for experiments. With this setup we have 4 changes of the output voltage on channel A,
then silence, then again 4 changes of the output voltage, etc. This may by an alternative way of reducing the output voltage by 50% in some devices (i.e. inverter welder)
driven by SG3525. However an ideal way is using SG3525 in its correct way to generate output voltage on desired level (see Test 1 and Test 2): by changing the internal PWM
of SG3525.

 